<div id="order-confirmation" v-cloak>
  <div class="container mt-3">
    <div class="row">
      <div class="col-md-12">
        <div>
          <page-header
          heading="Reserved Order Confirmation"
          sub-heading="Your order has been reserved"
          />
        </div>
        <div class="card mb-3">
          <div class="card-header">
            User Details
          </div>
          <div class="card-body" v-if="orderWithAllData && _.isEmpty(orderWithAllData)">
            <span><spinner /></span>
            <span class="ml-1">Fetching Order Details...</span>
          </div>
          <div class="card-body">
            <div class="mb-2" v-if="orderWithAllData && orderWithAllData.User">
              <div><small>User Name</small></div>
              <div>{{orderWithAllData.User.fullName || 'Guest'}}</div>
            </div>
            <div v-if="loadedOrder.CustomerKeyword">
              <div><small>Order Recovery Keyword</small></div>
              <div>{{loadedOrder.CustomerKeyword}}</div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div class="card mb-3">
          <div class="card-header">
            Order
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table">
                <tr>
                  <th>
                    Order Number
                  </th>
                  <th>
                    Starting Date
                  </th>
                  <th>
                    Ending Date
                  </th>
                  <th>
                    Days of Use
                  </th>
                  <th>
                    Time Created
                  </th>
                </tr>
                <tr>
                  <td>
                    {{loadedOrder.id}}
                  </td>
                  <td>
                    {{moment(loadedOrder.DateStart).format("LL")}}
                  </td>
                  <td>
                    {{moment(loadedOrder.DateEnd).format("LL")}}
                  </td>
                  <td>
                    {{loadedOrder.DaysOfUse}}
                  </td>
                  <td>
                    {{moment(loadedOrder.createdAt).format("LLL")}}
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="card mb-3">
          <div class="card-header">
            Order Items
          </div>
          <div class="card-body" v-if="orderWithAllData && _.isEmpty(orderWithAllData)">
            <span><spinner /></span>
            <span class="ml-1">Fetching Order Rows...</span>
          </div>
          <div class="card-body" v-if="orderWithAllData && !_.isEmpty(orderWithAllData)">
            <div class="table-responsive">
              <table class="table table-bordered">
                <tr>
                  <th>
                  </th>
                  <th>
                    Name
                  </th>
                  <th>
                    Unit Price
                  </th>
                  <th>
                    Quantity In Order
                  </th>
                  <th>
                    Total Price
                  </th>
                </tr>
                <tr v-for="orderLine in orderWithAllData.OrderLineNumbers" v-if="orderLine.Glass !== null">
                  <td>
                    <img height="100px" :src="orderLine.glassDetails.ImgSrc" />
                  </td>
                  <td>
                    {{ orderLine.glassDetails.NameEng }}
                    {{ orderLine.glassDetails.NameJap }}
                  </td>
                  <td>
                    짜{{ orderLine.UnitPrice }}
                  </td>
                  <td>
                    짜{{ orderLine.Quantity }}
                  </td>
                  <td>
                    짜{{ orderLine.UnitPrice * orderLine.Quantity }}
                  </td>
                </tr>
                <tr>
                  <th colspan="3">
                  </th>
                  <th>
                    <b>Order Total</b>
                  </th>
                  <th>
                    짜{{orderWithAllData.TotalPrice}}
                  </th>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
